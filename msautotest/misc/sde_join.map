#
# Test of OGR SQL JOIN support via MapServer.  
#
# A joined field is used for the EXPRESSION used to classify the returned 
# polygons.
#   
# REQUIRES: INPUT=OGR OUTPUT=PNG INPUT=SDE
#

STATUS ON
#EXTENT 478300 4762880 481650 4765610
EXTENT 1283364.000001 457670.968990 1330430.374999 495313.843989

SIZE 400 300

IMAGETYPE png

DEBUG ON

LAYER
  NAME shppoly
  TYPE polygon
  CONNECTIONTYPE SDE
  CONNECTION "smoke.hobu.net,5151,sde,sde,osgeo"
  DATA "SDE.JOINTESTLAYER,SHAPE,SDE.DEFAULT"
  STATUS default
  DEBUG 3
  PROCESSING "JOINTABLE=SDE.JOINTESTTABLE"
  PROCESSING "JOINFROMFIELD=AQ_TAG"
  PROCESSING "JOINTOFIELD=AQ_TAG"
  FILTER "WHERE JOINTESTTABLE.AQ_TAG=JOINTESTLAYER.AQ_TAG"
  CLASSITEM "SDE.JOINTESTTABLE.VAL"
  CLASS
    NAME "selected"
    COLOR 0 0 255
    OUTLINECOLOR 255 0 0
    EXPRESSION "val1"
  END
  CLASS
    NAME "normal"
    COLOR 0 255 0
    OUTLINECOLOR 255 0 0
  END
END

END
