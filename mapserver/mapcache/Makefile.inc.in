prefix=@prefix@
exec_prefix=@exec_prefix@
libdir=@libdir@
bindir=@bindir@
top_builddir = @top_builddir@
SHELL = @SHELL@

TARGETS=mapcache mapcache_seed @MODULE_TARGET@
APXS=@APXS@
HTTPD=@HTTPD@
CC=@CC@
INSTALL=@INSTALL@
LIBTOOL=@LIBTOOL@
APACHECTL=@APACHECTL@
CFLAGS=@APR_CFLAGS@ @CFLAGS@ 
CURLCONFIG=@CURLCONFIG@

APXS_CFLAGS=@APXS_INC@
APXS_LIBS=@APXS_LIBS@
APXS_LDFLAGS=@APXS_LDFLAGS@

CURL_CFLAGS=@CURL_CFLAGS@
CURL_LIBS=@CURL_LIBS@

APU_INC=@APU_INC@
APU_LIBS=@APU_LIBS@
MEMCACHE_ENABLED=@MEMCACHE_ENABLED@

APR_INC=@APR_INC@
APR_LIBS=@APR_LIBS@

PCRE_LIBS=@PCRE_LIBS@
PCRE_CFLAGS=@PCRE_CFLAGS@
PCRE_ENABLED=@PCRE_ENABLED@

PNG_INC=@PNG_INC@
PNG_LIB=@PNG_LIB@

JPEG_INC=@JPEG_INC@
JPEG_LIB=@JPEG_LIB@

FASTCGI_INC=@FASTCGI_INC@
FASTCGI_LIB=@FASTCGI_LIB@
FASTCGI_ENABLED=@FASTCGI_ENABLED@

GDAL_INC=@GDAL_INC@
GDAL_LIB=@GDAL_LIB@
GDAL_ENABLED=@GDAL_ENABLED@
OGR_ENABLED=@OGR_ENABLED@

GEOS_INC=@GEOS_INC@
GEOS_LIB=@GEOS_LIB@
GEOS_ENABLED=@GEOS_ENABLED@

SQLITE_INC=@SQLITE_INC@
SQLITE_LIB=@SQLITE_LIB@
SQLITE_ENABLED=@SQLITE_ENABLED@

PIXMAN_INC=@PIXMAN_INC@
PIXMAN_LIB=@PIXMAN_LIB@
PIXMAN_ENABLED=@PIXMAN_ENABLED@

TIFF_INC=@TIFF_INC@
TIFF_LIB=@TIFF_LIB@
TIFF_ENABLED=@TIFF_ENABLED@

GEOTIFF_INC=@GEOTIFF_INC@
GEOTIFF_LIB=@GEOTIFF_LIB@
GEOTIFF_ENABLED=@GEOTIFF_ENABLED@

MAPSERVER_LIB=@MAPSERVER_LIB@
MAPSERVER_ENABLED=@MAPSERVER_ENABLED@

#ifeq ($(HTTPD),)
#THREADED_MPM=0
#else
#THREADED_MPM=$(shell $(HTTPD) -V | grep "Server MPM" | grep -q "Prefork"; echo $$?)
#endif
#MISC_ENABLED=@MISC_ENABLED@ -DTHREADED_MPM=$(THREADED_MPM)

ALL_ENABLED=$(MISC_ENABLED) $(MEMCACHE_ENABLED) $(PCRE_ENABLED) $(OGR_ENABLED) $(GEOS_ENABLED) $(SQLITE_ENABLED) $(PIXMAN_ENABLED) $(TIFF_ENABLED) $(GEOTIFF_ENABLED) $(MAPSERVER_ENABLED)

INCLUDES=-I../include $(CURL_CFLAGS) $(PNG_INC) $(JPEG_INC) $(TIFF_INC) $(GEOTIFF_INC) $(APR_INC) $(APU_INC) $(PCRE_CFLAGS) $(SQLITE_INC) $(PIXMAN_INC)
LIBS=$(CURL_LIBS) $(PNG_LIB) $(JPEG_LIB) $(APR_LIBS) $(APU_LIBS) $(PCRE_LIBS) $(SQLITE_LIB) $(PIXMAN_LIB) $(TIFF_LIB) $(GEOTIFF_LIB) $(MAPSERVER_LIB)

SEEDER_EXTRALIBS=$(GDAL_LIB) $(GEOS_LIB)
SEEDER_EXTRAINC=$(GDAL_INC) $(GEOS_INC)


OBJS=$(shell find . -regex '^.*\.c$$' -print | grep -v mapcache_seed.c | grep -v mod_mapcache.c | grep -v fastcgi_mapcache.c |sed "s/^\(.*\)\.c$$/\1.o/") 
LOBJS=$(shell find . -regex '^.*\.c$$' -print | grep -v mapcache_seed.c | grep -v mod_mapcache.c | grep -v fastcgi_mapcache.c | sed "s/^\(.*\)\.c$$/\1.lo/")
