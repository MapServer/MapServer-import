<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN"
          "http://mapserver.gis.umn.edu/mdp/docbkx412/docbookx.dtd">
<article>
    <articleinfo>
        <title>MapServer Referencia de Plantilla</title>
        <author>
            <firstname>Frank</firstname>
            <surname>Koormann</surname>
            <affiliation>
                <orgname>Intevation GmbH</orgname>
                <address>
                    <email>frank.koormann@intevation.de</email>
                </address>
            </affiliation>
        </author>
        <abstract>
            <para>
                Este documento es una referencia para las plantillas 
				de HTML de MapServer versión 3.5
            </para>   
            <para>
                Es basado en las versiones anteriores escritas por Steve Lime
                <email>steve.lime@dnr.state.mn.us</email>
            </para>   
            <para>
                Última Actualización:  12-28-2001
            </para>
        </abstract>
    </articleinfo>

    <sect1 id="intro">
        <title>MapServer - Documentación: Referencia de Archivos Plantillas</title>
        <para>
	Se utilizan Plantillas 1) para definir el estilo de la interfaz para una 
	aplicación CGI de MapServer y 2) para presentar los resultados de un query. 
	Ellos guían la presentación de resultados, una pregunta o un mapa, al usuario. 	
	Las Plantillas casi siempre son archivos HTML aunque ellos también pueden ser un 
	URL (e.g.. http://www.somewhere.com/[ATTRIBUTE]/info.html). Sólo pueden utilizarse 
	plantillas de URL con un QUERY simple o ITEMQUERY resulta tantas substituciones 
	definidas deespués de no estar disponible para ellos. La interfaz pan/zoom simple 
	utilizan un único archivo plantilla mientras que los quieries complejos requieren 
	a menudo de varias plantillas. Las plantillas usan a menudo JavaScript para reforzar 
	la interfaz básica.
        </para>
    </sect1>
  
    <sect1 id="notes">
        <title>Notas</title>
        <itemizedlist>
            <listitem>
                <para>
                    La substitución de los strings en la plantilla <emphasis>son</emphasis> 
                    sensibles al uso de mayúsculas y minusculas. 
                </para>
            </listitem>
            <listitem>    
                <para>
                    La substitución de los item atributados debe ser el mismo caso 
                    como los nombres de item en el archivo de dbase.
                </para>
            </listitem>
            <listitem>
                <para>
                    ArcView y ArcInfo generalmente producen archivos dbase con los 
                    nombres de los item todo en mayúscula. Es pertinente la codificación 
					de URL (es decir ' ' a ' +') aplicada cuando las plantillas están como URLs.
                </para>
            </listitem>
            <listitem>    
                <para>
                    Algunas substituciones también están disponibles en forma de Secuencia de Escape 
					(es decir URL codificada). 
                </para>
                <para>
					Como ejemplo esto se necesita cuando se generan 
					links dentro de una plantilla. Esto podría pasar 
					el mapextent actual a una nueva llamada de MapServer. 
					[mapext] es sustituido por un espacio delimitado de 
					coordenadas inferior-izquierda y superior-derecha. 
					Esto abrirá el URL. [mapext_esc] es sustituido por 
					un grupo de código apropiado.
                </para>
            </listitem>
        </itemizedlist>
    </sect1>
  
    <sect1 id="format">
        <title>Formato</title>
        <para>
            Las plantillas simplemente son archivos HTML o strings de 
			URL que contiene caracteres especiales que son reemplazados 
			por mapserv cada vez que la plantilla es procesada. La simple 
			substitución permite información como capas activas o extent 
			espacial ser pasado del usuario al mapserv y de vuelta nuevamente.  
			A menudo los nuevos valores se descargan en variables de los form 
			que se pasarán de nuevo. La lista de caracteres especiales y 
			variables de los form se verán mas adelante. Las plantillas de HTML 
			pueden incluir cualquier cosa incluso javascript y llamadas de java.
        </para>

        <sect2 id="general">
        <title>General</title>
        <variablelist>

            <varlistentry>
                <term>[version]</term>
                <listitem>
                    <para> 
                        Número versión de MapServer.
                    </para>
                </listitem>
            </varlistentry>

            <varlistentry>
                <term>[id]</term>
                <listitem>
                    <para> 
                        Único id de la sesión. Los id pueden pasarse 
						vía un form pero son comunmente generados por 
						el software. En ese caso el id es un encadenamiento 
						de tiempo de UNIX (o NT equivalente) y el id del 
						proceso. A menos que se obtengan mas respuestas 
						en un segundo que los ids de los procesos permitidos 
						los id pueden ser considerados únicos. ;->
                    </para>
                </listitem>
            </varlistentry>
  
            <varlistentry>
                <term>[host]</term>
                <listitem>
                    <para> 
                        Hostname del servidor web.
                    </para>
                </listitem>
            </varlistentry>
  
            <varlistentry>
                <term>[port]</term>
                <listitem>
                    <para> 
                        Puerta del servidor wev que está escuchando.
                    </para>
                </listitem>
            </varlistentry>
            
            <varlistentry>
                <term>
                    [<replaceable>post or get variable name</replaceable>], 
                    [<replaceable>post or get variable name</replaceable>_esc] 
                </term>
                <listitem>
                    <para> 
                        Los contenidos de cualquier variable 
						pasado al MapServer, si ellas fueron 
						utilizadas o no, puede hacerse eco de 
						esta manera. Un uso podría ser tener 
						que el usuario coloque un título del 
						mapa o el estilo de la flecha norte 
						en un compositor de mapa interactivo. 
						El sistema no se preocupa de los valores, 
						pero ellos podrían ser realmente importantes 
						en la creación de la salida final.
                    </para>
                    <para>
                        También disponible como versión escaped.
                    </para>
                </listitem>
            </varlistentry>

            <varlistentry>
                <term>
                    [web_<replaceable>meta data key</replaceable>],
                    [web_<replaceable>meta data key</replaceable>_esc]
                </term>
                <listitem>
                    <para> 
                        Objeto web de acceso al metadato.
                    </para>
                    <para>
                        También disponible como versión escaped.
                    </para>
                </listitem>
            </varlistentry>
            
        </variablelist>
         </sect2>

        <sect2 id="file_reference">
        <title>Referencia del Archivo</title>
        <variablelist>
            <varlistentry>
                <term>[img]</term>
                <listitem>
                    <para> 
                        Ruta (relativo al documento raíz) de nueva imagen, 
						sólo el nombre de la imagen si IMAGE_URL no es 
						seteable en el mapfile
                    </para>
                </listitem>
            </varlistentry>
  
            <varlistentry>
                <term>[ref]</term>
                <listitem>
                    <para> 
                        Ruta (relativo al documento raíz) de nueva 
						imagen de referencia.
                    </para>
                </listitem>
            </varlistentry>
  
            <varlistentry>
                <term>[legend]</term>
                <listitem>
                    <para> 
                        Ruta (relativo al documento raíz) de nueva 
						imagen de la leyenda.
                    </para>
                </listitem>
            </varlistentry>
  
            <varlistentry>
                <term>[scalebar]</term>
                <listitem>
                    <para> 
                        Ruta (relativo al documento raíz) de nueva imagen 
						de la barra de escala.
                    </para>
                </listitem>
            </varlistentry>
        
        </variablelist>

        <variablelist>
            
            <varlistentry>
                <term>[queryfile]</term>
                <listitem>
                    <para> 
                        Ruta del fichero con query (si el savequery fuera fijo como un 
                        <ulink url="cgi-reference.html">Parámetro de CGI</ulink>). 
                    </para>
                </listitem>
            </varlistentry>
  
            <varlistentry>
                <term>[map]</term>
                <listitem>
                    <para> 
                        Ruta del fichero del mapa (si el savemap fuera fijo como un  
                        <ulink url="cgi-reference.html">Parámetro de CGI</ulink>). 
                    </para>
                </listitem>
            </varlistentry>
  
        </variablelist>
        </sect2>

        <sect2 id="image_geometry">
        <title>Geometría de la imagen</title>
        <variablelist>
            <varlistentry>
                <term>[center]</term>
                <listitem>
                    <para> 
                        Centro de la imagen en pixels. Útil para 
						colocar imgxy como una variable en el form 
						cuando cambie el tamaño del mapa.
                    </para>
                </listitem>
            </varlistentry>
  
            <varlistentry>
                <term>[center_x], [center_y]</term>
                <listitem>
                    <para> 
                        Centro de la imagen en coordenadas X o Y en pixels.
                    </para>
                </listitem>
            </varlistentry>
  
            <varlistentry>
                <term>[mapsize], [mapsize_esc]</term>
                <listitem>
                    <para> 
                        Tamaño de la imagen actual en columnas y filas (separado 
						por espacios).
                    </para>
                    <para>
                        También disponible como versión escaped.
                    </para>
                </listitem>
            </varlistentry>
  
            <varlistentry>
                <term>[mapwidth], [mapheigth]</term>
                <listitem>
                    <para> 
                        Ancho o alto de la imagen actual.
                    </para>
                </listitem>
            </varlistentry>
  
            <varlistentry>
                <term>[scale]</term>
                <listitem>
                    <para> 
                        Escala de la imagen actual. El valor exacto 
						no es apropiado para información del usuario 
						pero es esencial para algunas aplicaciones. 
						El valor puede redondearse por ejemplo utilizando 
						JavaScript o un procesamiento posterior en el servidor.
                    </para>
                </listitem>
            </varlistentry>
            
        </variablelist>
        </sect2>
        
        <sect2 id="map_geometry">
        <title>Geometría del Mapa</title>
        <variablelist>
            <varlistentry>
                <term>[mapx], [mapy]</term>
                <listitem>
                    <para> 
                        Coodenada X e Y al pulsar el botón del mouse.
                    </para>
                </listitem>
            </varlistentry>
 
            <varlistentry>
                <term>[mapext], [mapext_esc]</term>
                <listitem>
                    <para> 
                        Mapextent completo (separado por espacios).
                    </para>
                    <para>
                        También disponible como versión escaped.
                    </para>
                </listitem>
            </varlistentry>
 
            <varlistentry>
                <term>[minx], [miny], [maxx], [maxy]</term>
                <listitem>
                    <para> 
                        Mínimo / máximo que X o Y coordinan de nueva magnitud del mapa.
                    </para>
                </listitem>
            </varlistentry>
  
            <varlistentry>
                <term>[rawext], [rawext_esc]</term>
                <listitem>
                    <para> 
                        Mapextent en bruto, que es el extent antes 
						de encajar al tamaño de la ventana (separado por espacios). 
						En casos donde la entrada provino del imgbox (vía Java o cualquier cosa) 
						el rawext se refiere a las coordenadas del imgbox transformando 
						a unidades del mapa.
                    </para>
                    <para>
                        También disponible como versión escaped.
                    </para>
                </listitem>
            </varlistentry>
  
            <varlistentry>
                <term>[rawminx], [rawminy], [rawmaxx], [rawmaxy]</term>
                <listitem>
                    <para> 
                        Coordenada X o Y mínima / máxima de un 
						extent en bruto del mapa/busqueda.
                    </para>
                </listitem>
            </varlistentry>
        </variablelist>

        <para>
			Las siguientes substituciones están sólo disponibles si el MapServer 
			se compila con soporte para PROJ y una proyección 
			se define en el <ulink url="mapfile-reference.html#projection">
			mapfile</ulink>
        </para>

        <variablelist>
            <varlistentry>
                <term>[maplon], [maplat]</term>
                <listitem>
                    <para> 
                        Valor de longitud / latitud al pulsar el botón del ratón.
                        Disponible sólo cuando la proyección está habilitada.
                    </para>
                </listitem>
            </varlistentry>
            
            <varlistentry>
                <term>[mapext_latlon], [mapext_latlon_esc]</term>
                <listitem>
                    <para> 
						Mapextent completo (separado por espacios).  
						Disponible sólo cuando la proyección habilitó.
                    </para>
                    <para>
                        También disponible como versión escaped.
                    </para>
                </listitem>
            </varlistentry>
            
            <varlistentry>
                <term>[minlon], [minlat], [maxlon] [maxlat]</term>
                <listitem>
                    <para> 
                        Valor mínimo / máximo para la longitud o latitud del 
						mapextent.
                        Disponible sólo cuando la proyección está habilitada.
                    </para>
                </listitem>
            </varlistentry>
            
        </variablelist>
        </sect2>
        
        <sect2 id="layer">
        <title>Layer</title>
        <variablelist>
            <varlistentry>
                <term>[get_layers]</term>
                <listitem>
                    <para> 
                        Todas las capas activas son formateados para 
						su inclusión en un URL. (es decir 
						layer=layer1&amp;layer=layer2 y así sucesivamente...)
                    </para>
                </listitem>
            </varlistentry>
  
            <varlistentry>
                <term>[layers] | [layers_esc]</term>
                    <listitem> 
                        <para> 
                            Delimita el espacio de todas las capas activas.
                        </para>
                        <para>
                            También disponible como versión escaped.
                        </para>
                    </listitem>
            </varlistentry>
  
            <varlistentry>
                <term>
                    [<replaceable>layername</replaceable>_check | select]
                </term>
                <listitem>
                    <para> 
						Utilizado para hacer capas persistente por medio 
						de una sesión de creación del mapa. El string se 
						reemplaza con el palabra clave "checked", "select" o"" 
						si el <emphasis>layername</emphasis> está en on. Layername 
						es el nombre de una capa cuando aparece en el <ulink url="mapfile-reference.html">map 
						file</ulink>. no trabaja para capas predefinidas.
                    </para>
                </listitem>
            </varlistentry>
  
            <varlistentry>
                <term>
                    [<replaceable>layername</replaceable>_<replaceable>meta
                    data key</replaceable>]
                </term>
                <listitem>
                    <para> 
                        Acceso al metadatos de una capa.
                    </para>
                </listitem>
            </varlistentry>
        </variablelist>
        </sect2>
        
        <sect2 id="zoom">
        <title>Zoom</title>
        <variablelist>
            <varlistentry>
                <term>
                    [zoom_minzoom to maxzoom_check|select]
                </term>
                <listitem>
                    <para>
						Usado para hacer el zoom con un factor persistente. 
						Los valores del zoom pueden ir de -25 a 25 por 
						defecto. El string se reemplaza con el palabra 
						clave de HTML "checked", "select" o"" dependiendo 
						del valor del zoom actual. 
                    </para>
                </listitem>
            </varlistentry>
  
            <varlistentry>
                <term>
                    [zoomdir_-1|0|1_check|select]
                </term>
                <listitem>
                    <para>
						Usado para hacer el zoom con una dirección persistente. 
						Use check con un radio o select con una 
						lista de la selección. Vea la demostración para un 
						ejemplo. El string se reemplaza con la palabra clave 
						de HTML "checked", "select" o"" dependiendo 
						del valor actual de zoomdir. 
                    </para>
                </listitem>
            </varlistentry>

        </variablelist>
        </sect2>
        
        <sect2 id="query">
        <title>Query</title>
        <para>
			Las siguientes substituciones están sólo disponibles 
			cuando 
			la plantilla se procesa como resultado de un query.
        </para>
        <variablelist>
  
            <varlistentry>
                <term>[shpext]</term>
                <listitem>
                    <para> 
						Extent del shape actual más un 5 porciento 
						en buffer. Disponible sólo al procesar resultados de 
						un query.
                    </para>
                </listitem>
            </varlistentry>
  
            <varlistentry>
                <term>[shpminx], [shpminy], [shpmaxx], [shpmaxy]</term>
                <listitem>
                    <para> 
						Coordenadas mínima / máxima de X o Y del extent de un shape.  
						Disponible sólo al procesar resultados de un query.
                    </para>
                </listitem>
            </varlistentry>

            <varlistentry>
                <term>[shpmid]</term>
                <listitem>
                    <para> 
						Mitad del extent del actual shape.  
						Disponible sólo al procesar resultados de un query.
                    </para>
                </listitem>
            </varlistentry>
  
            <varlistentry>
                <term>[shpmidx], [shpmidy]</term>
                <listitem>
                    <para> 
						Coordenadas X e Y de la mitad del extent del 
						actual shape.  
						Disponible sólo al procesar resultados de un query.
                    </para>
                </listitem>
            </varlistentry>
  
            <varlistentry>
                <term>[shpidx]</term>
                <listitem>
                    <para> 
						Valor del índice del shape actual.  
						Disponible sólo al procesar resultados de un query.
                    </para>
                </listitem>
            </varlistentry>
  
            <varlistentry>
                <term>[tileindex]</term>
                <listitem>
                    <para> 
						Valor del índice del azulejo actual. Si ningún tiles utilizado para
						 la forma actual que esto es reemplazado por" -1."  
						Disponible sólo al procesar resultados de la pregunta.
                    </para>
                </listitem>
            </varlistentry>
  
            <varlistentry>
                <term>[DBASE item name]</term>
                <listitem>
                    <para> 
						Nombre del item según el atributo de la tabla 
						asociada a una capa consultada. Sólo los atributos 
						para los query de las capas activas son accesibles. 
						El uso de mayúsculas y minusculas debe estar igual 
						que el almacenado en el archivo de DBASE. 
						Por ejemplo, ArcView utiliza mayúsculas para los 
						nombres de campo de los shapefile.  
						Disponible sólo al procesar resultados de un query.
                    </para>
                </listitem>
            </varlistentry>
        </variablelist>
        
        <para>
			Para modos de query que permiten para un conjunto de multiples 
			resultados, las siguientes substituciones de string están 
			disponibles. Para FEATURESELECT y modos de FEATURENSELECT los 
			totales se ajustan para no incluir la capa seleccionada. Los 
			resultados de la capa seleccionada ESTÁN disponibles para el 
			despliegue al usuario.
        </para>

        <variablelist>
            <varlistentry>
                <term>[cl]</term>
                <listitem>
                    <para> 
						Nombre de la capa actual. Útil en headers y footers 
						de la capa.  
						Disponible sólo al procesar resultados de un query.
                    </para>
                </listitem>
            </varlistentry>
  
            <varlistentry>
                <term>[lrn]</term>
                <listitem>
                    <para> 
						Número del resultado dentro de la capa actual. 
						Comenzando en 1. Útil en plantillas del query.  
						Disponible sólo al procesar resultados de un query.
                    </para>
                </listitem>
            </varlistentry>
  
            <varlistentry>
                <term>[nl]</term>
                <listitem>
                    <para> 
						Número de capas que devuelven resultados. Útil en web 
						header y footers.  
						Disponible sólo al procesar resultados de un query.
                    </para>
                </listitem>
            </varlistentry>
  
            <varlistentry>
                <term>[nlr]</term>
                <listitem>
                    <para> 
						Número total de resultados dentro de la capa actual. 
						Útil en web header y footers.  
						Disponible sólo al procesar resultados de un query.
                    </para>
                </listitem>
            </varlistentry>
  
            <varlistentry>
                <term>[nr]</term>
                <listitem>
                    <para> 
                        Total number of results. Useful in web header and
                        footers.
                        Available only when processing query results.
                    </para>
                </listitem>
            </varlistentry>
  
            <varlistentry>
                <term>[rn]</term>
                <listitem>
                    <para> 
						Número del resultado dentro de todos los resultados del query. Salidas a  
						1. útil en web header y footers.  
						Disponible sólo al procesar resultados de un query.
                    </para>
                </listitem>
            </varlistentry>

        </variablelist>

        </sect2>
    </sect1>
</article>


