<html>
  <head>
      <title>MapServer - Documentation: Symbol Set Reference</title>
      <script language="javascript" src="javascript/include.js"></script>
  </head>
  <body bgcolor="#FFFFFF" marginheight=0 marginwidth=0 style="margin:0px">

  <script language="javascript">header("doc");</script>

    <FONT FACE="arial,helvetica" COLOR="#3366cc" SIZE=+2"><B>Symbol Set Reference</B></FONT>
    <p>
    <b>Synopsis</b>:The MapServer comes with 3 default symbol files which are located in the symbols sub-directory of the distribution. The files are called shade.sym, 
    line.sym, and marker.sym and may be edited or replaced at your leisure provided the names remain the same. Note that symbol 0 is always the degenerate case for a 
    particular class of symbol. For points, symbol 0 is a single pixel, for shading (i.e. filled polygons) symbol 0 is a solid fill, and for lines, symbol 0 is a single
    pixel wide line.
    <p>
    <b>Notes</b>: Symbol files contain no information about colors. Color information is set within a class definition in the <a href="mapfile.html">map file</a>.
    <p>
    <b>Utilities</b>: Included with the distribution is a utility called sym2img which will create a GIF/PNG file from a symbol file. Run the program with no
    arguments to get the syntax.
    <p>
    <b>Format</b>: Symbol files are ASCII text files. A symbol file must start with one of the following keywords: SHADESET, LINESET or MARKERSET that defines 
    the type of symbols that follow. The file must end with the keyword end. Here's the general format:
    <p>
    MARKERSET|SHADESET|LINESET
    <p>
    FONTSET [filename] (optional)
    <p>
    SYMBOL<br>
    (options)<br>
    END # Symbol
    <p>
    (more symbols)
    <p>
    END # Symbol file
    <p>
    <a href="#shadeandmarker">Shade and marker symbols</a> have identical symbol formats and options, 
    <a href="#line">line symbols</a> have a few additional options. At present the maximum number of symbols 
    in a file is 64. This can be increase (or decreased) by editing mapsymbol.h and bumping the appropriate #defines
    at the top of the file.
    <p>
    <a name="shadeandmarker"><FONT FACE="arial,helvetica" COLOR="#3366cc" SIZE=+1"><B>Shade and Marker Symbols</b></font></a>
    <p>
    <menu>
      <li> <b>type [vector|ellipse|pixmap|truetype]</b>: The identifiers mean the following:
      <p>
      <menu>
	<li> vector: a simple drawing is used to define the shape of the symbol.
        <li> ellipse: radius values in the x and y directions define an ellipse.
	<li> pixmap: a user supplied GIF image will be used as the symbol.
        <li> truetype: TrueType font to use as defined in the FONTSET.
      </menu> 
      <p>
      <li> <b>points</b>: Signifies the start of the definition of points that make up a vector symbol or
           that define the x and y radius of an ellipse symbol. Here's an example that defines a simple triangle vector symbol:
      <p>
      <ul>
        POINTS<br>
        0 4<br>
        2 0<br>
        4 4<br>
        0 4<br>
        END
      </ul>
      <p>
      The end of points is signified with the keyword END. Coordinates are given in pixels and define the default size of
      the symbol before any scaling. In the above example the triangle would be 5x5 pixels in size by default. At present,
      the limit on number of points is 100. This can be increase (or decreased) by editing mapsymbol.c and bumping
      the appropriate #defines at the top of the file.
      <p>
      You can create non-continuous paths by inserting negative coordinates at the appropriate place. Here's an example
      that defines a simple vector cross or plus sign:
      <p>
      <ul>
        Points<br>
        2 0<br>
        2 4<br>
        -99 -99<br>
        0 2<br>
        4 2<br>
        END
      </ul>
      <p>
      For ellipse symbols you provide a single point that defines the x and y radius of an ellipse. Circles are created
      when x and y are equal.
      <p>
      <b>filled</b>: sets symbol so that it is filled with a user defined color (see <a href="mapfile.html">mapfile</a>
      documentation for more information on colors). For marker symbols, if outlineColor</a> was specified in the mapfile 
      then the symbol is outlined with it.
      <p>
      <b>transparent [color index]</b>: sets a transparent color for the input GIF image for pixmap symbols, or
      determines whether all  shade symbols should have a transparent background. For shade symbols it may be 
      desireable to have background features"show through" a transparent hatching pattern, creating a more 
      complex map. Here's an example:
      <p>
      By default a symbols background is the same a the parent image (i.e. color 0). This is user configurable.
      <p>
      <li> <b>image [filename]</b>: pathname of GIF file to use for a marker or shade fill. pixmap symbols can
      not be scaled. The main image colormap is loaded prior to the use of any pixmap symbols. If there is not enough
      room for the additional colors in the GIF file then the closest color(s) from the main image will be used. In cases
      with many colors this can result in some strange looking images. Transparency is honored.
      <p>
      <li> <b>character [char]</b>: character used to reference a particular TrueType font character. You'll need to
      figure out the mapping from keyboard character to font character.
      <p>
      <li> <b>antialias</b>: should TrueType fonts be antialiased.
    </menu>
    <p>
    <a name="line"><FONT FACE="arial,helvetica" COLOR="#3366cc" SIZE=+1"><B>Line Symbols</b></font></a>
    <p>
    Line symbols support all the options detailed above. Only new options are detailed below.
    <p>
    <menu>
      <li> <b>type [vector|ellipse|pixmap|truetype|styled]</b>: styled lines are essentially lines made up of multiple lines 
      with varying offsets and dash patterns.
      <p>
      <li> <b>style</b>: Signifies the start of a line style definition. It is followed by an offset, on dash length, and
      an off dash length that define individual lines in the style. For style types upto 11 line styles may be defined. 
      The style section is terminated with the keyword END. Units for dash lengths and offset are in pixels. Drawing line
      styles is somewhat of an inexact science. The MapServer uses a simple, imperfect, algoritm to offset lines and certain
      symbols can degenerate at sharp turns.
      <p>
      Anyway, here are a couple of examples:
      <p>

      <ul>
        A triple width line:
        <p>
        STYLE<br>
        -1 0 0<br>
         0 0 0<br>
         1 0 0<br>
        END
      </ul>
      <p>

      <ul>
      A psuedo highway line (two solid lines with a dashed line in between):
      <p>
      STYLE<br>
      -1 0 0<br>
       0 8 8<br>
       1 0 0<br>
      END
    </ul>
    <p>

    <ul>
      A utility symbol:
      <p>
      STYLE<br>
      -1 1 8<br>
       0 0 0<br>
       1 1 8<br>
      END
    </ul>
    <p>

  </menu>

  <script language="javascript">footer();</script>
