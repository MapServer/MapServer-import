<html>
<head>
<title>MapServer Demonstration Installation Instructions</title>
<script language="javascript" src="../javascript/include.js"></script>
</head>

<body bgcolor="#ffffff" marginheight=0 marginwidth=0 style="margin:0px">
<script language="javascript">header("doc");</script>

<h1>MapServer Demo Application<br>
Installation Instructions</h1>

<p>
Pericles S. Nacionales<br>
<a href="mailto:pnaciona@gis.umn.edu">pnaciona@gis.umn.edu<br>
        </a>02 February, 2002</p>

<p>
This document provides basic instructions on setting up the MapServer Demo
Application.&nbsp; It assumes that the MapServer CGI program (e.g., mapserv or
mapserv.exe) has been installed on the web server's cgi-bin directory.</p>
<p>_______________________________________________________________________________</p>
<h2>Table of Contents</h2>
<h3><a href="#intro">1. Introduction</a></h3>
<h3><a href="#install">2. Installation</a></h3>
<ul>
  <li><a href="#init">2.1 The demo_init.html file</a></li>
  <li><a href="#map">2.2 The map file</a></li>
  <li><a href="#template">2.3 The HTML template file</a></li>
  <li><a href="#error">2.4 Common Error Messages</a></li>
  <li><a href="#debug">2.5 Debugging Error Messages&nbsp;</a></li>
</ul>
<h3><a href="#info">3. Further Information</a></h3>
      <h3><a href="#ack">4. Acknowledgements</a></h3>
<p>_______________________________________________________________________________</p>
<h3><a name="intro">1. Introduction</a></h3>
<p> This document describes how to set the map and template file
parameters so that it works with the installed mapserver CGI software and the
demo dataset.&nbsp;It is assumed that the MapServer CGI program (mapserv or
mapserv.exe) has been compiled and installed in the web server's cgi-bin
directory, and that the web server is running. Although this document might seem targeted for the Unix users,
special instructions for Windows users are provided.</p>
      <p><b>Note on WINDOWS, UNIX, and URL paths usage:<br>
        </b> When specifying paths or subdirectories, WINDOWS uses the backslash 
        (\) while UNIX uses the forward slash (/). When writing a path as URL, 
        always use the forward slash.</p>
<h3><a name="install">2. Installation</a></h3>
      <p>If you have not already done so, download the MapServer 3.5 demo package 
        from http://mapserver.gis.umn.edu/dist/itasca3.5.tar.gz. Save or copy 
        the package into a web accessible directory (e.g. &quot;/home/httpd/htdocs&quot; 
        or &quot;C:\Inetpub\wwwroot&quot;). Decompress and untar the demo files.</p>
<p>One of the two example commands below can do the trick for
you.</p>
      <p><font face="Courier">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; gunzip -c 
        itasca3.5.tar.gz | tar xvf -</font></p>
      <p><font face="Courier">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; tar xzvf itasca3.5.tar.gz</font></p>
<p>(If you have Windows, WinZip or similar utilities can
decompress this package for you.)</p>
      <p>As an example, I will extract my files in &quot;/home/httpd/htdocs&quot; which 
        is also my web root directory. If I use Windows NT and IIS 4.0, I would 
        have extracted the files in &quot;C:\Inetpub\wwwroot&quot;. This should 
        decompress several files in a directory tree as below:<br>
        /home/httpd/htdocs/itasca<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
        /CVS<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
        /data<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
        /graphics<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
        /perl<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
        /symbols</p>
      <p>Or in Windows NT:<br>
        C:\Inetpub\wwwroot\itasca<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
        \CVS<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\data<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\graphics<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\perl<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\symbols</p>
      <p>If you are using Apache on Windows platform, you may unpack the demo 
        package under your htdocs directory, typically C:\Program Files\Apache 
        Group\Apache\htdocs.</p>
      <p>To make this demo application work with your MapServer, you will need 
        to edit three files--the application initialization html file (demo_init.html), 
        the map file (demo.map), and the main html template file (demo.html).</p>

<h4><a name="init">2.1 The demo_init.html file</a></h4>
<p>One of the three files, in this demo, that the user has to
edit is the &quot;demo_init.html&quot; file. This is an html form that
submits the initial parameters to the MapServer CGI. You need to make sure that the correct
MapServer CGI program is being called. In UNIX, the program is typically
called &quot;mapserv&quot; and is invoked from the cgi-bin directory as &quot;/cgi-bin/mapserv&quot;.
In Windows NT, it's typically called &quot;mapserv.exe&quot; and invoked as
&quot;/cgi-bin/mapserv.exe&quot;. Look for the line:</p>
<p><font face="Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;form method=GET action=&quot;/cgi-bin/mapserv&quot;&gt;</font></p>
      <p>and change as appropriate. Unix users typically don't have to change 
        this and Windows users will have to add the &quot;.exe&quot; extension.&nbsp; 
      </p>
      <p>1.) Now, look for the line:</p>
      <p><font face="Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input type=&quot;hidden&quot; 
        name=&quot;map&quot; value=&quot;/usr/local/apache/htdocs/mapserver_demos/itasca/demo.map&quot;&gt;</font></p>
<p>and change it with the new path of your demo.map. In my
example, this should now look like:</p>
      <p><font face="Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input 
        type=&quot;hidden&quot; name=&quot;map&quot; value=&quot;/home/httpd/htdocs/itasca/demo.map&quot;&gt;</font></p>
      <p>or on Windows,</p>
      <p><font face="Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input type=&quot;hidden&quot; 
        name=&quot;map&quot; value=&quot;c:\Inetpub\wwwroot\itasca\demo.map&quot;&gt;</font></p>
      <p>2.) If you are on Windows, look for the line:</p>
      <p><font face="Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input 
        type=&quot;hidden&quot; name=&quot;program&quot; value=&quot;/cgi-bin/mapserv&quot;&gt;</font></p>
      <p>and change it so that it now looks like:</p>
      <p><font face="Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input 
        type=&quot;hidden&quot; name=&quot;program&quot; value=&quot;/cgi-bin/mapserv.exe&quot;&gt;</font></p>
      <p>3.) Look for the line:</p>
      <p><font face="Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input 
        type=&quot;hidden&quot; name=&quot;map_web_imagepath&quot; value=&quot;/usr/local/apache/htdocs/tmp/&quot;&gt;</font></p>
      <p>If you are on Unix, you probably don't have to change it but if you are 
        using Windows, replace it with something like this:</p>
      <p><font face="Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input 
        type=&quot;hidden&quot; name=&quot;map_web_imagepath&quot; value=&quot;C:\inetpub\wwwroot\tmp\&quot;&gt;</font></p>
      <p>If you don't have the &quot;tmp&quot; directory under C:\Inetpub\wwwroot\, 
        make sure to create it and allow users to have write permission to it. 
        Windows 95/98 users probably don't have to worry about the write permission. 
        It's the Windows NT/2000 folks who need to do it. This is the directory 
        where MapServer will write all the map outputs to.</p>
      <p>4.) Lastly, look for the line:</p>
      <p><font face="Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input 
        type=&quot;hidden&quot; name=&quot;map_web_imageurl&quot; value=&quot;/tmp/&quot;&gt;</font></p>
      <p>This is how the local &quot;imagepath&quot; should appear on your URL, 
        relative to you website's root (&quot;http://my.web.root&quot;). That 
        is all that needs to be done with this file.</p>
      <h4><a name="map">2.2 The Map File</a></h4>
      <p>The map file is the MapServer application's configuration file. This 
        is where you normally specify paths to the template files and datasets. 
        This also where all the data layers are listed and &quot;classified&quot;. 
        For this demo, we only need to make sure that our &quot;WMS_ONLINERESOURCE&quot; 
        line points to our demo_init.html file. So, look for the line &quot;<font face="Courier New, Courier, mono">WMS_ONLINERESOURCE 
        &quot;http://localhost.localdomain/mapserver_demos/itasca/demo_init.html&quot;</font>&quot; 
        and replace it with your own URL. Your URL will look like this: <font face="Courier New, Courier, mono">&quot;http://my.web.server/itasca/demo_init.html&quot; 
        </font>(replace &quot;my.web.server&quot; with your real address, or use 
        &quot;localhost&quot;). </p>
<h4><a name="template">2.3 The HTML Template File</a></h4>

      <p>If you made the proper changes to your demo_init.html and demo.map files. 
        You don't have to change anything on demo.html. Please note, however, 
        how the layer names on your demo.map file are used in the demo.html template. 
        This is important when you start making changes to the layers.</p>

      <p>At this point you are basically done. Make sure that your web server and the 
        MapServer CGI program are running properly. Try typing &quot;http://localhost/cgi-bin/mapserv 
        or &quot;http://localhost/cgi-bin/mapserv.exe&quot;. This should return 
        the following message:<br>
        <font face="Courier New, Courier, mono">No query information to decode. 
        QUERY_STRING is set, but empty.</font></p>
      <p>If it does, your MapServer CGI program is running properly. You may now 
        try your demo by typing demo_init.html's web address: http://localhost/itasca/demo_init.html. 
        Congratulations you've installed the MapServer Demo app. Well, if you 
        run into errors, check the messages below.</p>
      <h4><a name="error">2.4 Common Error Messages</a></h4>

<p>Pointing a browser at <a href="http://host/itasca/demo_init.html">http://host/itasca/demo_init.html</a>
and slapping the 'initialize' button yields:</p>
<ul>
  <li><font face="Courier">msLoadMap(): Unable to access file. (/itasca/demo.map)</font></li>
</ul>

<p>You probably forgot to specify the complete path to the map file in
demo_init.html. For example, change:</p>

<blockquote>

<font face="Courier">&lt;input type=&quot;hidden&quot; name=&quot;map&quot;
value=&quot;itasca/demo.map&quot;&gt;</font>

</blockquote>

<p>to:</p>

<blockquote>

        <p><font face="Courier">&lt;input type=&quot;hidden&quot; name=&quot;map&quot; 
          value=&quot;/var/www/htdocs/itasca/demo.map&quot;&gt;</font></p>
        <p>&nbsp;</p>
      </blockquote>
<ul>
  <li><font face="Courier">loadSymbol(): GD library error</font></li>
</ul>
<p>This can occur if you have a new version (&gt;1.6(?)) of the GD library
installed which doesn't support GIF images, And, you have a symbol file which
contains a gif image. A workaround is to comment out all sections of the .map
file which refer to the gif-containing symbol file, and the layers which refer
to those symbols. For example:</p>

<blockquote>

<p><font face="Courier">#MARKERSET symbols/marker.sym<br>
...<br>
#LAYER<br>
#&nbsp; NAME roads<br>
#&nbsp; MAXSCALE 300000<br>
#&nbsp; STATUS ON<br>
#&nbsp; DATA ctyrdln3<br>
#&nbsp; TYPE ANNOTATION<br>
#&nbsp; LABELITEM &quot;road_name&quot;<br>
#&nbsp; CLASS<br>
#&nbsp;&nbsp;&nbsp; COLOR 255 255 255<br>
#&nbsp;&nbsp;&nbsp; SYMBOL 'county_highway_shield' # &lt;= the 'bad' line<br>
#&nbsp;&nbsp;&nbsp; LABEL<br>
#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MINFEATURESIZE 40<br>
#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MINDISTANCE 150<br>
#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; POSITION CC<br>
#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SIZE TINY<br>
#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; COLOR 0 0 0<br>
#&nbsp;&nbsp;&nbsp; END<br>
#&nbsp; END<br>
#END # county road annotation</font></p>

</blockquote>
      <p>Alternatively just comment out the CLASS section rather than the whole 
        layer.</p>

<ul>
  <li><font face="Courier">msDrawReferenceMap(): GD library error.&nbsp; Unable
    to initialize image.</font></li>
</ul>
      <p>This is probably the same problem as the previous one: no GIF support. Check 
        and see if the REFERENCE image is a .GIF. If it is comment out the REF 
        code block. (This is a workaround, not a fix)</p>

<ul>
  <li><font face="Courier">msLoadMap(): Premature End-of-File. Undefined symbol.</font></li>
</ul>

      <p>You have an unclosed object or class construct and the End Of File was 
        encountered before mapserve found and END statement. Usually means an 
        END statement was forgotten or inadvertantly commented out. (All object 
        constructions must have an END.&nbsp; Study the LAYER construct in the 
        previous section for an example).</p>
      <p><b>Windows users, please read:</b><br>
        When running MapServer on Windows 2000 and IIS 5.0, clicking on the &quot;Initialize&quot; 
        button the user gets prompted to save and download the mapserv (or mapserv.exe) 
        file.</p>
      <p>This is an IIS permission problem. Make sure that mapserv.exe had read 
        and execute permission for the IUSR account. Also, using the Internet 
        Services Manager, navigate to the &quot;Scripts&quot; (or cgi-bin) folder. 
        Right click on the Scripts folder and select &quot;Properties&quot;. Check 
        to make sure that the &quot;Execute Permissions&quot; on the &quot;Virtual 
        Directory&quot; tab is set to &quot;Scripts and Executables&quot;. If 
        not, change it. Restart the web service. (This requires administrative 
        privileges to accomplish.)</p>
      <h4><a name="debug">2.5 Debugging Error Messages</a></h4>

<p>How to interpret the error messages you may see. For an example we'll use:<br>
<br>
<font face="Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; loadString(): Incorrect data
type. (105):(3)<br>
</font><br>
The function &quot;loadString&quot; failed because it was fed an incorrect data
type; It was expecting a string and recieved a number. The error occured in
line# 3 of the .map file (the line count starts at 0).<br>
<br>
The last set of brackets contain the line number:</p>

<p><font face="Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (3) # line 3</font></p>

<p>the previous brackets contain the value mapserv choked on:</p>

<p><font face="Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (105)&nbsp;&nbsp;&nbsp; #
the line in the mapfile was: NAME&nbsp; 105d11</font></p>

<p>So mapserver parsed &quot;NAME 105d11&quot; as an integer when a<br>
string was expected. In this example the solution is to make<br>
sure you quote values when you need them interpreted as<br>
characters rather than numbers:</p>

      <p><font face="Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NAME &quot;105d11&quot;</font></p>

<h3><a name="info">3. Further Information</a></h3>

      <p>The instructions provided here is meant to get your demo application working.&nbsp; 
        By changing the template and map files, you should be able to get a good 
        idea of the basic capabilities of MapServer.&nbsp; If you need further 
        examples beyond what this demo gives, there is a MapServer tutorial available 
        at <a href="http://terrasip.gis.umn.edu/projects/tutorial">http://terrasip.gis.umn.edu/projects/tutorial</a>.&nbsp; 
        For the Windows NT version of this tutorial, please visit <a href="http://128.101.73.80/projects/tutorial">http://128.101.73.80:82/projects/tutorial</a>.&nbsp; 
        Of course, documentation and other forms of support, including the mapserver-users 
        listserv archives can be found at http://mapserver.gis.umn.edu.</p>

<h3><a name="ack">4. Acknowledgements</a></h3>
<p>This demonstration application was created, and is being provided, by Steve
Lime, e-mail: <a href="mailto:steve.lime@dnr.state.mn.us">steve.lime@dnr.state.mn.us</a>.<br>
The sections Common Error Messages and Debugging Error Messages were kindly
provided by Matt Wilkie, e-mail: <a href="mailto:Matt.Wilkie@gov.yk.ca">Matt.Wilkie@gov.yk.ca</a>.</p>
<p><i><font size="2">Last updated: </font></i><!--webbot bot="Timestamp"
startspan S-Type="EDITED" S-Format="%m/%d/%Y %H:%M:%S %Z" -->10/23/2000 14:12:01 -0500<!--webbot
bot="Timestamp" i-CheckSum="37731" endspan -->
</p>

       
       <p>
       <center>
         <a href=home.html>[Homepage]</a>&nbsp;
	 <a href=dload.html>[Download]</a>&nbsp;
	 <a href=doc.html>[Documentation]</a>&nbsp;
	 <a href=support.html>[Support]</a>&nbsp;
	 <a href=gallery.html>[Gallery]</a>
       </center>

<script language="javascript">footer();</script>


</body>
</html>
